---
title: "配置安全告警"
date: 2022-02-09T11:00:01+08:00
weight: 10
description: >
    介绍如何配置并触发安全告警
---

目前安全告警主要针对用户异常登录以及完整性校验两种消息订阅设置的安全消息生效。

## 配置流程

1. 在消息订阅配置中，针对用户锁定通知和完整性校验两种消息配置接收人。
2. 用户锁定通知还需要在全局配置中配置“连续登录失败次数”，当用户连续输入n次后将会锁定用户账号。
3. 后续用户锁定或系统镜像、快照、组件、数据库记录等被修改时，将在安全告警中产生告警记录发送给对应的接收人。

## 配置举例

下面以用户锁定通知介绍如何配置安全告警。用户锁定通知仅针对于本地Sql用户有效。

### 全局配置

1. 在左侧导航栏，选择 **_"系统配置/全局配置/全局配置"_** 菜单项，进入全局配置页面。
2. 配置“连续登录失败次数”的上限值，如3次，配置完成后，保存配置。

### 配置接收人

1. 在左侧导航栏，选择 **_"认证与安全/消息中心/消息订阅设置"_** 菜单项，进入消息订阅设置页面。
2. 单击“用户锁定通知”名称项，进入消息详情页面。
3. 单击“接收管理”页签，进入接收管理页面。
4. 单击列表上方 **_"新建"_** 按钮，弹出新建接收人对话框。
5. 配置以下参数：
    - 资源范围：限定发送消息通知的资源范围。
        - 当资源范围为“系统”时，则系统内所有资源变化都将发送消息通知。
        - 当资源范围为“域”并选择指定域时，仅指定域下的资源变化才会发送消息通知。
        - 当资源范围为“项目”并选择指定项目时，仅指定项目下的资源变化才会发送消息通知。
    - 类型：选择接收消息通知的类型，包括接收人、角色、机器人。
    - 接收人：当类型选择“接收人”时，需要选择接收资源消息通知的用户。
    - 角色：当类型选择“角色”时，需要指定角色的范围和角色。
        - 当范围为“全局”时，将会通知全系统中对应角色的用户。
        - 当范围为“域”时，将会通知资源所在域下对应角色的用户。
        - 当范围为“项目”时，将会通知资源所在项目下对应角色的用户。
    - 机器人：当类型选择“机器人”时，需要选择接收资源消息通知的机器人。
6. 单击 **_"确定"_** 按钮，完成操作。

### 触发安全告警

当用户连续3次登录平台失败时，将会触发安全告警并将告警消息发送给配置的接收人，并锁定用户。

### 如何解锁用户

<big>**界面操作**</big>

1. 在左侧导航栏，选择 **_"认证与安全/认证体系/用户"_** 菜单项，进入用户页面。
2. 单击锁定用户右侧操作列 **_"更多"_** 按钮，选择下拉菜单 **_"启用"_** 按钮，解锁用户。


<big>**climc操作**</big>

```bash
# 启用锁定用户
$ climc user-update --enable <user_id>
```