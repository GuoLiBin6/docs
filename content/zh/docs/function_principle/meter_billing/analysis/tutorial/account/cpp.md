---
title: "预留实例"
date: 2022-03-17T17:19:46+08:00
weight: 50
description: >
    管理Azure cpp，支持将cpp分摊给项目使用
---

目前仅支持管理Azure中国区的CPP。

### 导入数据

该功能用于导入Azure中国区的cpp信息，需要用户先下载模板，并补充cpp的相关信息。

1. 在左侧导航栏，选择 **_"费用/费用分析/云账号"_** 菜单项，进入云账号页面。
2. 单击云账号名称项，进入云账号总览页面。
3. 单击“预留实例”页签，进入预留实例页面。
4.  单击列表上方 **_"导入数据"_** 按钮，弹出导入数据对话框。
5. 将补充cpp信息的模板拖拽到该区域，单击 **_"确定"_** 按钮，导入cpp数据。

### 分摊cpp

将Azure cpp分摊到项目中使用，后续将根据cpp的分摊情况重新生成项目的费用账单。Cpp购买成本也将在生成账单中的每月最后一天体现，资源类型为cpp。

**分摊逻辑**

- 先判断某个产品，实际使用时长< cpp总时长，则代表无按需费用，我们无需处理，只需根据比例算出各项目需承担CPP总费用、cpp使用时长等；
- 若实际使用时长>cpp总时长,代表产生了按量付费，先计算出该产品的实际费率=按需费用/超出CPP时长；
- 根据各项目cpp总时长及实际使用时长，计算出该项目需多承担或少承担的时长，通过上一步计算出的费用，计算出相应金额；
- 最后通过各项目要多承担或少承担的总金额和实际使用时间，计算出要承担的费率，将该费用增加到原本的费用上，计算出相应的按需费用

{{% alert title="说明" %}}
已分配完成的cpp暂不支持更改。
{{% /alert %}}

1. 在左侧导航栏，选择 **_"费用/费用分析/云账号"_** 菜单项，进入云账号页面。
2. 单击云账号名称项，进入云账号总览页面。
3. 单击“预留实例”页签，进入预留实例页面。
4. 单击服务说明右侧操作列 **_"分摊"_** 按钮，弹出分摊对话框。
5. 选择需要分摊cpp的项目、以及每个项目中分摊的cpp数量（只支持整数），必须将cpp数量全部分摊。
6. 配置完成后，单击 **_"确定"_** 按钮，完成操作。


### 查看分摊记录

当cpp已经分配到项目中使用后，可以通过查看记录功能查看具体操作记录。

1. 在左侧导航栏，选择 **_"费用/费用分析/云账号"_** 菜单项，进入云账号页面。
2. 单击云账号名称项，进入云账号总览页面。
3. 单击“预留实例”页签，进入预留实例页面。
4. 单击服务说明右侧操作列 **_"查看记录"_** 按钮，弹出记录详情。
5. 查看操作时间、操作动作、变更内容、发起人等信息。

